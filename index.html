
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Produtos Extraídos</title>

        <!-- Plausible Analytics -->
        <script defer data-domain="emartani.github.io" src="https://plausible.io/js/script.js"></script>

        <style>
            body {
                font-family: Arial, sans-serif;
                background-color: #f5f5f5;
                margin: 20px;
                color: #333;
            }

            h1 {
                text-align: center;
                color: #006400;
                margin-bottom: 10px;
            }

            <p id="atualizacao">Atualizado em: {data_atual}</p>

            #atualizacao {
                text-align: center;
                font-size: 14px;
                color: #555;
                margin-bottom: 20px;
            }

            #busca {
                display: block;
                margin: 20px auto;
                padding: 12px;
                width: 60%;
                font-size: 16px;
                border: 1px solid #bbb;
                border-radius: 6px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }

            .botoes {
                text-align: center;
                margin: 20px;
            }

            button {
                padding: 10px 20px;
                margin: 5px;
                font-size: 15px;
                cursor: pointer;
                border: none;
                border-radius: 6px;
                background: #007b3a;
                color: #fff;
                transition: 0.2s;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            }

            button:hover {
                background: #005f2c;
                transform: scale(1.03);
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
                background: white;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 2px 6px rgba(0,0,0,0.15);
            }

            th {
                background-color: #006400;
                color: #fff;
                padding: 12px;
                text-align: left;
                position: sticky;
                top: 0;
                z-index: 1;
            }

            td {
                padding: 10px 12px;
                border-bottom: 1px solid #eee;
            }

            tr:hover {
                background-color: #f1f1f1;
            }

            .desconto {
                font-weight: bold;
                color: #d32f2f;
            }

            .preco-usado {
                font-style: italic;
                color: #555;
            }
        </style>

    </head>

        <!-- Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-0X4P4ZM0RC"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-0X4P4ZM0RC');
        </script>

    <body>
    <h1 id="titulo">Produtos Extraídos - Ordenados por Maior Desconto</h1>
    <p id="atualizacao">Atualizado em: {data_atual}</p>
    <div class="botoes">
        <button onclick="ordenarDesconto()">Ordenados por Maior Desconto</button>
        <button onclick="ordenarPreco()">Ordenados por Menor Valor</button>
    </div>
    <input type="text" id="busca" placeholder="Buscar produto...">
    <table id="tabela">
        <tr>
            <th>Nome</th>
            <th>Preço Clube + Amigo</th>
            <th>Preço Antigo</th>
            <th>Preço Novo</th>
            <th>Desconto</th>
            <th>Preço usado</th>
        </tr>
    
        <tr>
            <td>Café em Cápsula Mochaccino Canela Nescafé Dolce Gusto 172g 10 Cápsulas</td>
            <td>R$ 17,98</td>
            <td>R$ 26,99</td>
            <td>R$ 19,98</td>
            <td class="desconto">26%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Café Capsula Matinal Dolce Gusto 80g</td>
            <td>R$ 17,98</td>
            <td>R$ 26,99</td>
            <td>R$ 19,98</td>
            <td class="desconto">26%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Café em Cápsula Espresso Nescafé Dolce Gusto 60g 10 Cápsulas</td>
            <td>R$ 17,98</td>
            <td>R$ 26,99</td>
            <td>R$ 19,98</td>
            <td class="desconto">26%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Cappuccino em Cápsula Dolce Gusto 117g</td>
            <td>R$ 17,98</td>
            <td>R$ 26,99</td>
            <td>R$ 19,98</td>
            <td class="desconto">26%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Café Capsula Caseiro Dolce Gusto 80g</td>
            <td>R$ 17,98</td>
            <td>R$ 26,99</td>
            <td>R$ 19,98</td>
            <td class="desconto">26%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Café Capsula Cappuccino Doce de Leite Dolce Gusto 170g</td>
            <td>R$ 17,98</td>
            <td>R$ 26,99</td>
            <td>R$ 19,98</td>
            <td class="desconto">26%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Café com Leite em Cápsula Pingado Nescafé Dolce Gusto Caixa 140g 10 Unidades</td>
            <td>R$ 17,98</td>
            <td>R$ 26,99</td>
            <td>R$ 19,98</td>
            <td class="desconto">26%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Manteiga Tablete Extra com Sal Batavo 200g</td>
            <td></td>
            <td>R$ 12,49</td>
            <td>R$ 9,98</td>
            <td class="desconto">20%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Manteiga Extra sem Sal BATAVO Tablete 200g</td>
            <td></td>
            <td>R$ 12,49</td>
            <td>R$ 9,98</td>
            <td class="desconto">20%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Empanado de Frango Tekitos Seara 1kg</td>
            <td>R$ 19,99</td>
            <td>R$ 26,99</td>
            <td>R$ 21,99</td>
            <td class="desconto">19%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Café Tradicional Magni Vácuo 500g</td>
            <td>R$ 19,98</td>
            <td>R$ 25,99</td>
            <td>R$ 20,98</td>
            <td class="desconto">19%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Caixa Sonho de Valsa e Ouro Branco Sortidos 220g</td>
            <td>R$ 12,99</td>
            <td>R$ 15,89</td>
            <td>R$ 13,99</td>
            <td class="desconto">12%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Suco de Laranja Super Suco 1,7L</td>
            <td>R$ 16,79</td>
            <td>R$ 16,79</td>
            <td>R$ 14,98</td>
            <td class="desconto">11%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Filé de Tilápia Congelado Canção 800g</td>
            <td>R$ 36,99</td>
            <td>R$ 42,39</td>
            <td>R$ 39,99</td>
            <td class="desconto">6%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Papel Higiênico Folha Dupla Neutro Mimmo 30m Pacote Leve 12 Pague 11 Unidades</td>
            <td>R$ 14,90</td>
            <td>R$ 16,79</td>
            <td>R$ 15,90</td>
            <td class="desconto">5%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Kit Sabão em Pó Tixan Ypê Primavera 800g 2 Unidades + Grátis Amaciante Concentrado Ypê 500ml</td>
            <td>R$ 19,98</td>
            <td>R$ 21,98</td>
            <td>R$ 20,98</td>
            <td class="desconto">5%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Bebida Energética Sugar Free Nectarina Red Bull 250ml</td>
            <td>R$ 8,49</td>
            <td>R$ 9,29</td>
            <td>R$ 8,99</td>
            <td class="desconto">3%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Bebida Energética Nectarina Red Bull 250ml</td>
            <td>R$ 8,49</td>
            <td>R$ 9,29</td>
            <td>R$ 8,99</td>
            <td class="desconto">3%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Pão de Queijo Congelado Padeirinho Magni 1kg</td>
            <td>R$ 12,99</td>
            <td>R$ 15,49</td>
            <td>R$ 14,99</td>
            <td class="desconto">3%</td>
            <td class="preco-usado">-</td>
        </tr>
        
        <tr>
            <td>Refrigerante Coca-Cola Zero Pet 1,5L</td>
            <td>R$ 7,49</td>
            <td>R$ 8,79</td>
            <td>R$ 8,69</td>
            <td class="desconto">1%</td>
            <td class="preco-usado">-</td>
        </tr>
        
    </table>
    <script>
    // Normaliza texto para busca
    function normalizeText(s) {
        return s.toLowerCase().normalize('NFD').replace(/[̀-ͯ]/g, '').trim();
    }

    // Campo de busca
    document.addEventListener('DOMContentLoaded', function() {
        const input = document.getElementById('busca');
        input.value = '';
        const linhas = document.querySelectorAll('#tabela tr');
        linhas.forEach(tr => tr.style.display = '');
        input.addEventListener('input', function() {
            const filtro = normalizeText(input.value);
            linhas.forEach(function(tr) {
                if (!tr.querySelector('td')) return;
                const nome = normalizeText(tr.cells[0].textContent);
                tr.style.display = (filtro === '' || nome.includes(filtro)) ? '' : 'none';
            });
        });
    });

    // Ordenação por desconto
    function ordenarDesconto() {
        ordenarTabela(4, true);
        document.getElementById("titulo").textContent = "Ofertas Amigão Lins - Ordenados por Maior Desconto";
        atualizarPrecoUsado("-");
    }

    // Ordenação por menor valor (clube ou novo)
    function ordenarPreco() {
        ordenarTabelaPreco();
        document.getElementById("titulo").textContent = "Ofertas Amigão Lins - Ordenados por Menor Valor";
    }

    // Ordenar por coluna numérica (desconto)
    function ordenarTabela(colIndex, desc) {
        const tabela = document.getElementById("tabela");
        let linhas = Array.from(tabela.rows).slice(1);
        linhas.sort((a, b) => {
            let va = parseInt(a.cells[colIndex].textContent.replace('%','')) || 0;
            let vb = parseInt(b.cells[colIndex].textContent.replace('%','')) || 0;
            return desc ? vb - va : va - vb;
        });
        linhas.forEach(l => tabela.appendChild(l));
    }

    // Ordenar por menor preço (clube ou novo)
    function ordenarTabelaPreco() {
        const tabela = document.getElementById("tabela");
        let linhas = Array.from(tabela.rows).slice(1);
        linhas.sort((a, b) => {
            let va = extrairPreco(a);
            let vb = extrairPreco(b);
            return va.valor - vb.valor;
        });
        linhas.forEach(l => tabela.appendChild(l));
        linhas.forEach(l => {
            let info = extrairPreco(l);
            l.cells[5].textContent = info.tipo + " (" + info.valor.toFixed(2) + ")";
        });
    }

    function extrairPreco(tr) {
        let precoClube = tr.cells[1].textContent.replace("R$", "").replace(",", ".").split(" ")[0];
        let precoNovo = tr.cells[3].textContent.replace("R$", "").replace(",", ".").split(" ")[0];
        let pc = parseFloat(precoClube);
        let pn = parseFloat(precoNovo);
        if (!isNaN(pc) && pc > 0) return {valor: pc, tipo: "Clube + Amigo"};
        if (!isNaN(pn) && pn > 0) return {valor: pn, tipo: "Novo"};
        return {valor: Infinity, tipo: "-"};
    }

    function atualizarPrecoUsado(valor) {
        const linhas = document.querySelectorAll('#tabela tr');
        linhas.forEach(function(tr) {
            if (!tr.querySelector('td')) return;
            tr.cells[6].textContent = valor;
        });
    }

    </script>
    </body>
    </html>
    